<div class="margenGeneral">
    <div class="row">
        <div class="col-sm-2">
        </div>
        <div class="col-sm-4">
            <span title="Se debe colocar el codigo del proceso para mostrar el contenido del mismo.
            Ejemplo: SI-0000-0000">
                <svg xmlns="http://www.w3.org/2000/svg" class="svgSearch" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000">
                    <path d="M0 0h24v24H0V0z" fill="none" />
                    <path
                        d="M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z" />
                </svg>
            </span>
            
            <input type="text" style="padding: 5px;" placeholder="Cargar Proyecto...">
            <span title="Buscar">
                <svg xmlns="http://www.w3.org/2000/svg" class="svgSearch" height="30px" viewBox="0 0 24 24" width="30px"
                    fill="#000000">
                    <path d="M0 0h24v24H0V0z" fill="none" />
                    <path
                        d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" />
                </svg>
            </span>
        </div>
        <div class="col-sm-3">
            <button class="btn btngrabar" style="float: left;" (click)="proyecciones()">Ver Proyectos</button>
        </div>
    </div>
</div>
<div class="card">
    <div class="titulocard">
        <h3>Detalles Del Proceso</h3>
    </div>
    <div style="padding: 10px;">
        <div class="row">
            <div class="col-sm-4">
                <h4 style="text-align: right; font-size: 15px; font-weight: 800;">Codigo Proceso: </h4>
            </div>
            <div class="col-sm-6">
                <p>{{ codigoproceso }}</p>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-4">
                <h4 style="text-align: right; font-size: 15px; font-weight: 800;">Observaciones: </h4>

            </div>
            <div class="col-sm-6">
                <p>{{ observacion }}</p>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-4">
                <h4 style="text-align: right; font-size: 15px; font-weight: 800;">Fechas Del Proceso: </h4>
            </div>
            <div class="col-sm-6">
                <div class="row">
                    <!--  -->
                    <div class="col-sm-6">
                        <b>Fecha Entrega:</b>
                        <br>
                        <!-- <input class="fechaEmision" id="date" type="date"> -->
                        <input type="datetime-local" [disabled]="enablefechas" [(ngModel)]="fechas.fechaentrega">
                    </div>
                    <div class="col-sm-6">
                        <b>Fecha Calificación:</b>
                        <br>
                        <!-- <input class="fechaEmision" id="date" type="date" [(ngModel)]="fechas.fechacalificacion"> -->
                        <input type="datetime-local" [disabled]="enablefechas" [(ngModel)]="fechas.fechacalificacion">
                
                    </div>
                </div>
                <br>
                <div class="row">
                    <div class="col-sm-6">
                        <b>Fecha Convalidación:</b>
                        <br>
                        <!-- <input class="fechaEmision" id="date" type="date" [(ngModel)]="fechas.fechaconvalidacion"> -->
                        <input type="datetime-local" [disabled]="enablefechas" [(ngModel)]="fechas.fechaconvalidacion">
                    </div>
                    <div class="col-sm-6">
                        <b>Fecha Puja:</b>
                        <br>
                        <!-- <input class="fechaEmision" id="date" type="date" [(ngModel)]="fechas.fechapuja"> -->
                        <input type="datetime-local" [disabled]="enablefechas" [(ngModel)]="fechas.fechapuja">
                
                    </div>
                </div>
            </div>
            <div class="col-sm-2">
                <br>
                <button class="btn btngrabar" (click)="guardarFechas()">Guardar Fechas</button>
            </div>
        </div>
    </div>
</div>
<div class="card">

    <div class="titulocard">
        <h3>Detalles Del Proceso</h3>
    </div>

    <mat-accordion class="example-headers-align" multi>
        <mat-expansion-panel>
            <mat-expansion-panel-header>
                <mat-panel-title>
                    <b>Detalles Del Proceso</b>
                </mat-panel-title>
                <mat-panel-description>
                    .
                    <mat-icon>dehaze</mat-icon>
                </mat-panel-description>
            </mat-expansion-panel-header>

        </mat-expansion-panel>

        <mat-expansion-panel>
            <mat-expansion-panel-header>
                <mat-panel-title>
                    <b>Registro De Actividades</b>
                </mat-panel-title>
                <mat-panel-description>
                    .
                    <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="24px"
                        viewBox="0 0 24 24" width="24px" fill="#000000">
                        <g>
                            <rect fill="none" height="24" width="24" y="0" />
                        </g>
                        <g>
                            <path
                                d="M12,6c-1.1,0-2-0.9-2-2s0.9-2,2-2s2,0.9,2,2S13.1,6,12,6z M17,2h2c0,2.7-0.93,4.41-2.3,5.5c-0.5,0.4-1.1,0.7-1.7,0.9V22h-2 v-6h-2v6H9V10.1c-0.3,0.1-0.5,0.2-0.6,0.3C7.87,10.81,7,11.43,7,14H5c0-2.06,0.35-3.78,2.11-5.29C8.21,7.81,10,7,12,7 s2.68-0.46,3.48-1.06C15.96,5.55,17,4.76,17,2z M4,16h3v6H4V16z" />
                        </g>
                    </svg>
                </mat-panel-description>
            </mat-expansion-panel-header>

            <div class="gantt">
                <div class="row">
                    <div class="col-sm-4">
                        <span style="font-size: 14px;color: #000000; "><b>Actividad Principal</b></span><br>
                        <input type="text" class="form-control" [(ngModel)]="subactividad.pName">
                    </div>
                    <div class="col-sm-4">
                        <span style="font-size: 14px;color: #000000;"><b>Responsable</b></span><br>
                        <input type="text" class="form-control" [(ngModel)]="subactividad.pRes">
                    </div>
                    <div class="col-sm-4">
                        <br>
                        <button class="btn" style="float: right;" (click)="crearSubactividades()">Crear Subactividades</button>
                    </div>
                </div>
                <br>
                <div style="width: 100%; height: auto; padding: 20px;" *ngIf="showSubactividades">
                    <button class="btn" style="margin: 0;" (click)="addSubactividad()">Añadir Subactividad</button>
                    <br>
                    <br>
                    <div class="row" *ngFor="let actividad of listaganttactividades; let i=index;">
                        <div class="col-sm-3">
                            <span style="font-size: 14px;color: #000000;"><b>Sub Actividad</b></span><br>
                            <input type="text" class="form-control" [(ngModel)]="listaganttactividades[i].pName">
                        </div>
                        <div class="col-sm-3">
                            <span style="font-size: 14px;color: #000000;"><b>Responsable</b></span><br>
                            <input type="text" class="form-control" [(ngModel)]="listaganttactividades[i].pRes">
                        </div>
                        <div class="col-sm-2">
                            <span style="font-size: 14px;color: #000000;"><b>Fecha De Inicio</b></span><br>
                            <input style="font-size: 16px; width: 100%; padding: 5px;" id="date" type="date" [(ngModel)]="listaganttactividades[i].pStart">
                        </div>
                        <div class="col-sm-2">
                            <span style="font-size: 14px;color: #000000;"><b>Fecha Fin</b></span><br>
                            <input style="font-size: 16px; width: 100%; padding: 5px;" id="date" type="date" [(ngModel)]="listaganttactividades[i].pEnd">
                        </div>
                        <div class="col-sm-2">
                            <span style="font-size: 14px;color: #000000;"><b>Prioridad Actividad</b></span><br>
                            <select style="font-size: 17px; width: 100%; padding: 5px;" [(ngModel)]="listaganttactividades[i].pClass">
                                <option value="0">Prioridad</option>
                                <option value="gtaskblue">Baja</option>
                                <option value="gtaskyellow">Media</option>
                                <option value="gtaskred">Alta</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
            
            <br>
            <br>
            <br>
            <br>
            <div style="height:300px; height: auto;" >

                <ng-gantt style="overflow-x: scroll;" [options]="editorOptions" [data]="data" #editor></ng-gantt>


            </div>

            <!-- <gantt-chart-angular [config]="config" (onClick)="clickEventHandler($event)"></gantt-chart-angular> -->


        </mat-expansion-panel>

        <mat-expansion-panel>
            <mat-expansion-panel-header>
                <mat-panel-title>
                    <b>Hoja De Pedido</b>
                </mat-panel-title>
                <mat-panel-description>
                    .
                    <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="24px"
                        viewBox="0 0 24 24" width="24px" fill="#000000">
                        <g>
                            <rect fill="none" height="24" width="24" />
                        </g>
                        <g>
                            <g>
                                <rect height="4" width="4" x="10" y="4" />
                                <rect height="4" width="4" x="4" y="16" />
                                <rect height="4" width="4" x="4" y="10" />
                                <rect height="4" width="4" x="4" y="4" />
                                <rect height="4" width="4" x="16" y="4" />
                                <polygon points="11,17.86 11,20 13.1,20 19.08,14.03 16.96,11.91" />
                                <polygon points="14,12.03 14,10 10,10 10,14 12.03,14" />
                                <path
                                    d="M20.85,11.56l-1.41-1.41c-0.2-0.2-0.51-0.2-0.71,0l-1.06,1.06l2.12,2.12l1.06-1.06C21.05,12.07,21.05,11.76,20.85,11.56z" />
                            </g>
                        </g>
                    </svg>
                </mat-panel-description>
            </mat-expansion-panel-header>

            <div class="row" style="text-align: center;">
                <div class="col-sm-1"><span></span></div>
                <div class="col-sm-4">
                    <span><b>Detalle</b></span>
                    <br>
                    <input type="text" class="form-control" [(ngModel)]="hojapedido.detalle">
                </div>
                <div class="col-sm-4">
                    <span><b>Cantidad</b></span>
                    <br>
                    <input type="number" class="form-control" [(ngModel)]="hojapedido.cantidad">
                </div>
                <div class="col-sm-3">
                    <br>
                    <button class="btn" (click)="addPedido()">Registrar</button>
                    <br>
                    <br>
                    <button class="btn" (click)="enviarMail()"><svg xmlns="http://www.w3.org/2000/svg"
                            enable-background="new 0 0 24 24" height="24px" viewBox="0 0 24 24" width="24px"
                            fill="#fff">
                            <g>
                                <rect fill="none" height="24" width="24" />
                                <path
                                    d="M20,4H4C2.9,4,2,4.9,2,6v12c0,1.1,0.9,2,2,2h9v-2H4V8l8,5l8-5v5h2V6C22,4.9,21.1,4,20,4z M12,11L4,6h16L12,11z M19,15l4,4 l-4,4v-3h-4v-2h4V15z" />
                            </g>
                        </svg>
                        Enviar Solicitud</button>
                </div>
            </div>
            <br>
            <div class="mat-elevation-z8" style="box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.4);">
                <table mat-table [dataSource]="datapedido" matSort>

                    <!-- detalle', 'cantidad', 'estado, 'acciones'-->

                    <ng-container matColumnDef="detalle">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Detalles </th>
                        <td mat-cell *matCellDef="let element">
                            {{ element.detalle }}
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="cantidad" style="text-align: center;">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Cantidad </th>
                        <td mat-cell *matCellDef="let element">
                            {{ element.cantidad }}
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="estado">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header style="text-align: center;"> Estado </th>
                        <td mat-cell *matCellDef="let element" style="text-align: center;">
                            <b>{{ element.estado }}</b>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="acciones">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header style="text-align: center;"> Acciones </th>
                        <td mat-cell *matCellDef="let element" style="text-align: center;">
                            <button  mat-icon-button title="Eliminar" (click)="deleteDetalleHp(element)">
                                <mat-icon color="warn">delete</mat-icon>
                            </button>
                        </td>
                    </ng-container>

                    <tr mat-header-row *matHeaderRowDef="displayedpedido"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedpedido;"></tr>
                </table>

                <mat-paginator class="piepaginaTables" [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons>
                </mat-paginator>
            </div>

        </mat-expansion-panel>

    </mat-accordion>
</div>